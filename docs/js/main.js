let r={palette:"1",name:"",job:"",photo:"",phone:"",email:"",linkedin:"",github:""},j="";const d=document.querySelectorAll(".js_fieldset"),H=document.querySelectorAll(".js__paletteWrap"),s=document.querySelector(".js__previewCard"),g=document.querySelector(".js__inputName"),h=document.querySelector(".js__namePreview"),b=document.querySelector(".js__inputJob"),v=document.querySelector(".js__jobPreview"),w=document.querySelector(".js__inputPhone"),A=document.querySelector(".js__phonePreview"),q=document.querySelector(".js__inputMail"),B=document.querySelector(".js__mailPreview"),k=document.querySelector(".js__inputLinkedin"),D=document.querySelector(".js__linkedinPreview"),P=document.querySelector(".js__inputGithub"),E=document.querySelector(".js__gitHubPreview"),N=document.querySelector(".js__profile-upload-btn"),f=document.querySelector(".js__profile-preview"),i=document.querySelector(".js__profile-image"),$=document.querySelector(".js__resetBtn");document.querySelector(".js__inputMail");document.querySelector(".js__inputPhone");document.querySelector(".js__inputLinkedin");document.querySelector(".js__inputGithub");const J=document.querySelector(".js__inputPhone"),O=document.querySelector(".js__previewMail"),U=document.querySelector(".js__previewLinkedin"),G=document.querySelector(".js__previewGithub"),c=document.querySelector(".js_createCardBtn"),m=document.querySelector(".js_cardUrl"),C=document.querySelector(".js_hiddenSection"),F=document.querySelector(".js_link");document.querySelector(".js_cardMessage");const S=document.querySelector(".js_cardSuccess"),L=document.querySelector(".js_twitterBtn"),x=document.querySelector(".js__inputTel"),_=document.querySelector(".js__icon");function R(e){const t=e.currentTarget.closest("fieldset");for(let n=0;n<d.length;n++){const o=d[n].closest("fieldset");o===t?o.classList.remove("collapsed"):o.classList.add("collapsed")}t.scrollIntoView()}for(let e=0;e<d.length;e++)d[e].addEventListener("click",R);function W(e){const t=e.currentTarget.dataset.id,n=Array.from(s.classList).filter(p=>p.includes("palette"));s.classList.remove(n),s.classList.add(`palette${t}`);const o=e.currentTarget.querySelector(".js_radioBtn");o&&(o.checked=!0),r.palette=t,c.removeAttribute("disabled"),u(),localStorage.setItem("personalData",JSON.stringify(r))}function z(e){if(r.palette===""){const t=Array.from(s.classList).filter(n=>n.includes("palette"));s.classList.remove(t),s.classList.add("palette1")}else{const t=JSON.parse(localStorage.getItem("personalData")),n=Array.from(s.classList).filter(M=>M.includes("palette"));s.classList.remove(n),s.classList.add(`palette${t.palette}`);const o=document.querySelector(".js_radioBtn1"),p=document.querySelector(".js_radioBtn2"),I=document.querySelector(".js_radioBtn3");t.palette==="1"?o.checked=!0:t.palette==="2"?p.checked=!0:I.checked=!0}}for(const e of H)e.addEventListener("click",W);const l={name:h.textContent,job:v.textContent,photo:i.src},T=()=>{h.innerHTML=r.name||l.name,v.innerHTML=r.job||l.job,i.src=r.photo||l.photo,A.href=`tel:${r.phone}`,B.href=`mailto:${r.email}`,D.href=`https://${r.linkedin}`;const e=r.github.startsWith("@")?r.github.slice(1):r.github;E.href=`https://github.com/${e}`},a=e=>{r[e.target.name]=e.target.value,T(),c.removeAttribute("disabled"),u(),localStorage.setItem("personalData",JSON.stringify(r))};g.addEventListener("input",a);b.addEventListener("input",a);w.addEventListener("input",a);q.addEventListener("input",a);k.addEventListener("input",a);P.addEventListener("input",a);const V=e=>{const t=e.target.files[0];if(t){const n=new FileReader;n.onload=()=>{const o=n.result;f.style.backgroundImage=`url(${o})`,i.src=o,r.photo=o,localStorage.setItem("personalData",JSON.stringify(r))},n.readAsDataURL(t)}else console.error("No se ha seleccionado ningÃºn archivo.");c.removeAttribute("disabled"),u()};N.addEventListener("change",V);const y=JSON.parse(localStorage.getItem("personalData"));y!==null&&(r=y,z(),K(r));function K(e){g.value=e.name,b.value=e.job,w.value=e.phone,q.value=e.email,k.value=e.linkedin,P.value=e.github,e.photo===""?i.src=l.photo:i.src=e.photo,f.style.backgroundImage=`url(${e.photo})`,T()}const Q=()=>{X(),Y(),Z(),u(),localStorage.setItem("personalData",JSON.stringify(r)),ee()},X=()=>{document.querySelector(".js_create-form").reset(),r={palette:"1",name:"",job:"",photo:"",phone:"",email:"",linkedin:"",github:""}},Y=()=>{h.innerHTML='<h3 class="js__namePreview">Nombre Apellido</h3>',v.innerHTML='<p class="js__jobPreview">Front-end developer</p>',J.innerHTML='<a href="#" class="js__previewTlf"><i class="fa-solid fa-mobile-screen-button preview_contact--icon"></i></a>',O.innerHTML='<a href="#" class="js__previewMail"><i class="fa-regular fa-envelope preview_contact--icon"></i></a>',U.innerHTML='<a href="#" class="js__previewLinkedin"><i class="fa-brands fa-linkedin-in preview_contact--icon"></i></a>',G.innerHTML='<a href="#" class="js__previewGithub"><i class="fa-brands fa-github-alt preview_contact--icon"></i></a>',i.src="./images/img_prueba_preview.jpg",f.style.backgroundImage="",c.removeAttribute("disabled")},Z=()=>{s.classList.remove("palette2"),s.classList.remove("palette3"),s.classList.add("palette1");const e=document.querySelectorAll(".js_radioBtn");e[0].checked=!0},u=()=>{C.classList.add("hidden")},ee=()=>{_.classList.remove("hidden")};$.addEventListener("click",Q);const te=e=>{e.preventDefault(),C.classList.remove("hidden"),c.setAttribute("disabled",""),fetch("https://dev.adalab.es/api/card/",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{t.success===!1?(L.classList.add("hidden"),S.innerHTML="",m.innerHTML=`
                    <p>Ha sucedido un error al cargar la tarjeta</p>
                    <p>${t.error}</p>`):(S.innerHTML="La tarjeta ha sido creada:",L.classList.remove("hidden"),m.href=t.cardURL,m.innerHTML=t.cardURL,j=t.cardURL,F.href=`https://twitter.com/intent/tweet?text=He%20creado%20mi%20tarjeta%20de%20visita%2C%20puedes%20visualizarla%20en%20este%20enlace%3A%20&url=${j}`)}),x.value===""?_.classList.add("hidden"):_.classList.remove("hidden")};c.addEventListener("click",te);
//# sourceMappingURL=main.js.map
