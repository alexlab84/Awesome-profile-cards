let n={palette:"1",name:"",job:"",photo:"",phone:"",email:"",linkedin:"",github:""},p="";const o=document.querySelectorAll(".js_fieldset"),S=document.querySelectorAll(".js__paletteWrap"),c=document.querySelector(".js__previewCard"),b=document.querySelector(".js__inputName"),d=document.querySelector(".js__namePreview"),w=document.querySelector(".js__inputJob"),u=document.querySelector(".js__jobPreview"),y=document.querySelector(".js__inputPhone"),q=document.querySelector(".js__phonePreview"),g=document.querySelector(".js__inputMail"),k=document.querySelector(".js__mailPreview"),P=document.querySelector(".js__inputLinkedin"),C=document.querySelector(".js__linkedinPreview"),M=document.querySelector(".js__inputGithub"),T=document.querySelector(".js__gitHubPreview"),H=document.querySelector(".js__profile-upload-btn"),v=document.querySelector(".js__profile-preview"),j=document.querySelector(".js__profile-image"),A=document.querySelector(".js__resetBtn");document.querySelector(".js__inputMail");document.querySelector(".js__inputPhone");document.querySelector(".js__inputLinkedin");document.querySelector(".js__inputGithub");const E=document.querySelector(".js__inputPhone"),I=document.querySelector(".js__previewMail"),B=document.querySelector(".js__previewLinkedin"),U=document.querySelector(".js__previewGithub"),a=document.querySelector(".js_createCardBtn"),l=document.querySelector(".js_cardUrl"),f=document.querySelector(".js_hiddenSection"),$=document.querySelector(".js_link");document.querySelector(".js_cardMessage");const _=document.querySelector(".js_cardSuccess"),m=document.querySelector(".js_twitterBtn");function G(e){const t=e.currentTarget.closest("fieldset");for(let i=0;i<o.length;i++){const r=o[i].closest("fieldset");r===t?r.classList.remove("collapsed"):r.classList.add("collapsed")}t.scrollIntoView()}for(let e=0;e<o.length;e++)o[e].addEventListener("click",G);function F(e){const t=e.currentTarget.dataset.id,i=Array.from(c.classList).filter(L=>L.includes("palette"));c.classList.remove(i),c.classList.add(`palette${t}`);const r=e.currentTarget.querySelector(".js_radioBtn");r&&(r.checked=!0)}for(const e of S)e.addEventListener("click",F);const h={name:d.textContent,job:u.textContent},N=()=>{d.innerHTML=n.name||h.name,u.innerHTML=n.job||h.job,q.href=`tel:${n.phone}`,k.href=`mailto:${n.email}`,C.href=`https://${n.linkedin}`;const e=n.github.startsWith("@")?n.github.slice(1):n.github;T.href=`https://github.com/${e}`},s=e=>{n[e.target.name]=e.target.value,N(),a.removeAttribute("disabled")};b.addEventListener("input",s);w.addEventListener("input",s);y.addEventListener("input",s);g.addEventListener("input",s);P.addEventListener("input",s);M.addEventListener("input",s);const x=e=>{const t=e.target.files[0];if(t){const i=new FileReader;i.onload=()=>{const r=i.result;v.style.backgroundImage=`url(${r})`,j.src=r,n.photo=r},i.readAsDataURL(t)}else console.error("No se ha seleccionado ningÃºn archivo.")};H.addEventListener("change",x);const D=()=>{R(),W(),J(),O()},R=()=>{document.querySelector(".js_create-form").reset(),n={palette:"1",name:"",job:"",photo:"",phone:"",email:"",linkedin:"",github:""}},W=()=>{d.innerHTML='<h3 class="js__namePreview">Nombre Apellido</h3>',u.innerHTML='<p class="js__jobPreview">Front-end developer</p>',E.innerHTML='<a href="#" class="js__previewTlf"><i class="fa-solid fa-mobile-screen-button preview_contact--icon"></i></a>',I.innerHTML='<a href="#" class="js__previewMail"><i class="fa-regular fa-envelope preview_contact--icon"></i></a>',B.innerHTML='<a href="#" class="js__previewLinkedin"><i class="fa-brands fa-linkedin-in preview_contact--icon"></i></a>',U.innerHTML='<a href="#" class="js__previewGithub"><i class="fa-brands fa-github-alt preview_contact--icon"></i></a>',j.src="./images/img_prueba_preview.jpg",v.style.backgroundImage="",a.removeAttribute("disabled")},J=()=>{c.classList.remove("palette2"),c.classList.remove("palette3"),c.classList.add("palette1");const e=document.querySelectorAll(".js_radioBtn");e[0].checked=!0},O=()=>{f.classList.add("hidden")};A.addEventListener("click",D);const z=e=>{e.preventDefault(),f.classList.remove("hidden"),a.setAttribute("disabled",""),fetch("https://dev.adalab.es/api/card/",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{t.success===!1?(m.classList.add("hidden"),_.innerHTML="",l.innerHTML=`
                    <p>Ha sucedido un error al cargar la tarjeta</p>
                    <p>${t.error}</p>`):(_.innerHTML="La tarjeta ha sido creada:",m.classList.remove("hidden"),l.href=t.cardURL,l.innerHTML=t.cardURL,p=t.cardURL,$.href=`https://twitter.com/intent/tweet?text=He%20creado%20mi%20tarjeta%20de%20visita%2C%20puedes%20visualizarla%20en%20este%20enlace%3A%20&url=${p}`)})};a.addEventListener("click",z);
//# sourceMappingURL=main.js.map
