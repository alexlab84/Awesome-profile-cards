let r={palette:"1",name:"",job:"",photo:"",phone:"",email:"",linkedin:"",github:""},f="";const d=document.querySelectorAll(".js_fieldset"),T=document.querySelectorAll(".js__paletteWrap"),s=document.querySelector(".js__previewCard"),y=document.querySelector(".js__inputName"),m=document.querySelector(".js__namePreview"),g=document.querySelector(".js__inputJob"),_=document.querySelector(".js__jobPreview"),b=document.querySelector(".js__inputPhone"),H=document.querySelector(".js__phonePreview"),w=document.querySelector(".js__inputMail"),A=document.querySelector(".js__mailPreview"),q=document.querySelector(".js__inputLinkedin"),B=document.querySelector(".js__linkedinPreview"),k=document.querySelector(".js__inputGithub"),D=document.querySelector(".js__gitHubPreview"),E=document.querySelector(".js__profile-upload-btn"),h=document.querySelector(".js__profile-preview"),i=document.querySelector(".js__profile-image"),N=document.querySelector(".js__resetBtn");document.querySelector(".js__inputMail");document.querySelector(".js__inputPhone");document.querySelector(".js__inputLinkedin");document.querySelector(".js__inputGithub");const $=document.querySelector(".js__inputPhone"),J=document.querySelector(".js__previewMail"),O=document.querySelector(".js__previewLinkedin"),U=document.querySelector(".js__previewGithub"),c=document.querySelector(".js_createCardBtn"),p=document.querySelector(".js_cardUrl"),P=document.querySelector(".js_hiddenSection"),G=document.querySelector(".js_link");document.querySelector(".js_cardMessage");const j=document.querySelector(".js_cardSuccess"),S=document.querySelector(".js_twitterBtn");function F(e){const t=e.currentTarget.closest("fieldset");for(let n=0;n<d.length;n++){const o=d[n].closest("fieldset");o===t?o.classList.remove("collapsed"):o.classList.add("collapsed")}t.scrollIntoView()}for(let e=0;e<d.length;e++)d[e].addEventListener("click",F);function x(e){const t=e.currentTarget.dataset.id,n=Array.from(s.classList).filter(u=>u.includes("palette"));s.classList.remove(n),s.classList.add(`palette${t}`);const o=e.currentTarget.querySelector(".js_radioBtn");o&&(o.checked=!0),r.palette=t,c.removeAttribute("disabled"),v(),localStorage.setItem("personalData",JSON.stringify(r))}function R(e){if(r.palette===""){const t=Array.from(s.classList).filter(n=>n.includes("palette"));s.classList.remove(t),s.classList.add("palette1")}else{const t=JSON.parse(localStorage.getItem("personalData")),n=Array.from(s.classList).filter(M=>M.includes("palette"));s.classList.remove(n),s.classList.add(`palette${t.palette}`);const o=document.querySelector(".js_radioBtn1"),u=document.querySelector(".js_radioBtn2"),I=document.querySelector(".js_radioBtn3");t.palette==="1"?o.checked=!0:t.palette==="2"?u.checked=!0:I.checked=!0}}for(const e of T)e.addEventListener("click",x);const l={name:m.textContent,job:_.textContent,photo:i.src},C=()=>{m.innerHTML=r.name||l.name,_.innerHTML=r.job||l.job,i.src=r.photo||l.photo,H.href=`tel:${r.phone}`,A.href=`mailto:${r.email}`,B.href=`https://${r.linkedin}`;const e=r.github.startsWith("@")?r.github.slice(1):r.github;D.href=`https://github.com/${e}`},a=e=>{r[e.target.name]=e.target.value,C(),c.removeAttribute("disabled"),localStorage.setItem("personalData",JSON.stringify(r))};y.addEventListener("input",a);g.addEventListener("input",a);b.addEventListener("input",a);w.addEventListener("input",a);q.addEventListener("input",a);k.addEventListener("input",a);const W=e=>{const t=e.target.files[0];if(t){const n=new FileReader;n.onload=()=>{const o=n.result;h.style.backgroundImage=`url(${o})`,i.src=o,r.photo=o,localStorage.setItem("personalData",JSON.stringify(r))},n.readAsDataURL(t)}else console.error("No se ha seleccionado ningÃºn archivo.");c.removeAttribute("disabled"),v()};E.addEventListener("change",W);const L=JSON.parse(localStorage.getItem("personalData"));L!==null&&(r=L,R(),z(r));function z(e){y.value=e.name,g.value=e.job,b.value=e.phone,w.value=e.email,q.value=e.linkedin,k.value=e.github,e.photo===""?i.src=l.photo:i.src=e.photo,h.style.backgroundImage=`url(${e.photo})`,C()}const V=()=>{K(),Q(),X(),v(),localStorage.setItem("personalData",JSON.stringify(r))},K=()=>{document.querySelector(".js_create-form").reset(),r={palette:"1",name:"",job:"",photo:"",phone:"",email:"",linkedin:"",github:""}},Q=()=>{m.innerHTML='<h3 class="js__namePreview">Nombre Apellido</h3>',_.innerHTML='<p class="js__jobPreview">Front-end developer</p>',$.innerHTML='<a href="#" class="js__previewTlf"><i class="fa-solid fa-mobile-screen-button preview_contact--icon"></i></a>',J.innerHTML='<a href="#" class="js__previewMail"><i class="fa-regular fa-envelope preview_contact--icon"></i></a>',O.innerHTML='<a href="#" class="js__previewLinkedin"><i class="fa-brands fa-linkedin-in preview_contact--icon"></i></a>',U.innerHTML='<a href="#" class="js__previewGithub"><i class="fa-brands fa-github-alt preview_contact--icon"></i></a>',i.src="./images/img_prueba_preview.jpg",h.style.backgroundImage="",c.removeAttribute("disabled")},X=()=>{s.classList.remove("palette2"),s.classList.remove("palette3"),s.classList.add("palette1");const e=document.querySelectorAll(".js_radioBtn");e[0].checked=!0},v=()=>{P.classList.add("hidden")};N.addEventListener("click",V);const Y=e=>{e.preventDefault(),P.classList.remove("hidden"),c.setAttribute("disabled",""),fetch("https://dev.adalab.es/api/card/",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{t.success===!1?(S.classList.add("hidden"),j.innerHTML="",p.innerHTML=`
                    <p>Ha sucedido un error al cargar la tarjeta</p>
                    <p>${t.error}</p>`):(j.innerHTML="La tarjeta ha sido creada:",S.classList.remove("hidden"),p.href=t.cardURL,p.innerHTML=t.cardURL,f=t.cardURL,G.href=`https://twitter.com/intent/tweet?text=He%20creado%20mi%20tarjeta%20de%20visita%2C%20puedes%20visualizarla%20en%20este%20enlace%3A%20&url=${f}`)})};c.addEventListener("click",Y);
//# sourceMappingURL=main.js.map
